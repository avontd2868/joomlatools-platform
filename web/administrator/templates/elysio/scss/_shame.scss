// Styling select2 containers inside pagination
.k-pagination__limit {
  white-space: nowrap;

  .select2-container.select2-container.select2-container {
    display: inline-block;
    margin-right: $k-table-pagination-spacing;
    min-width: 56px !important;
    width: auto !important;
  }
}

// Form views nicer layout
.readonly {
  display: block;
  min-height: 32px;
}

// Back to KUI?
form legend {
  &:first-child {
    padding-top: 0;
  }
}





.k-form-block {
  @include content-block;
}

.label-important {
  background: red;
}

.k-table-container .k-table small {
  a,
  span {
    display: inline;
    vertical-align: baseline;
  }
}

.k-title-bar__heading {
  text-transform: capitalize;
}


// @TODO: Create a mixin from button in KUI to be able to include it elsewhere easily?
.k-table .btn-micro {
  display: inline-block;
  margin-bottom: 0; /* 1 */
  font-weight: $k-regular;
  text-align: center;
  vertical-align: middle;
  touch-action: manipulation;
  cursor: pointer;
  background-image: none; /* 2 */
  border: 1px solid transparent;
  white-space: nowrap;
  box-shadow: none;
  text-shadow: none;
  user-select: none;
  border-radius: $k-border-radius;
  margin-right: $k-spacing-tiny;
  line-height: $k-line-height;
  padding: $k-spacing-base-vertical $k-spacing-base-horizontal;

  &:last-child {
    margin-right: 0;
  }

  @include rtl {
    margin-right: 0;
    margin-left: $k-spacing-tiny;

    &:last-child {
      margin-left: 0;
    }
  }

  @include button-variant($k-btn-default-color, $k-btn-default-background, $k-btn-default-border);

  // @TODO: mixin as well?
  border-radius: $k-border-radius-small;
  font-size: $k-font-size-tiny;
  line-height: $k-line-height-tiny;
  padding: $k-spacing-tiny-vertical $k-spacing-tiny-horizontal;

  background: white;


  &.disabled {
    opacity: 1;

    [class*="icon"]:after {
      opacity: 1;
      color: $k-color-type-light;
    }
  }

  .icon-publish.icon-publish {
    @include icon-after(check, true) {
      color: $k-color-accent;
    }
  }

  .icon-unpublish {
    @include icon-after(x, true);
  }

  .icon-featured.icon-featured {
    @include icon-after(star, true) {
      color: $k-color-accent;
    }
  }

  .icon-unfeatured {
    @include icon-after(star, true) {
      color: $k-color-type-light;
    }
  }

  .icon-checkedout {
    @include icon-after(lock-locked, true);
  }

  .icon-trash {
    @include icon-after(trash, true);
  }
}



.k-list {
  .active {
    font-weight: $k-bold;
  }
}

.label {
  background: $k-color-type-light;
  color: white;
  vertical-align: middle;
}

a.label {
  color:white;
}

.label-important,
.label-warning {
  background: $k-color-warning;
}

.label-info {
  background: $k-color-accent;
}

.label-success {
  background: $k-color-success;
}


.k-table-container {
  td {
    .select2 {
      display: inline-block;
      vertical-align: top;
      max-width: 90% !important;
    }
  }
}



// @TODO: Create a mixin of arrows so we can include?
.k-table th {
  font-weight: $k-bold;
}


.k-table {
  .icon-arrow-up-3,
  .icon-arrow-down-3 {
    position: relative;
    display: inline-block;
    width: 6px;
    height: 3px;
    background: transparent;

    &:before,
    &:after {
      display: block;
      content: " ";
      position: absolute;
      opacity: 0.33;
    }

    &:before {
      @include caret(top, 4px);
      bottom: 100%;
    }

    &:after {
      @include caret(bottom, 4px);
      top: 100%;
    }
  }

  .icon-arrow-up-3 {
    &:before {
      opacity: 1;
    }
  }

  .icon-arrow-down-3 {
    &:after {
      opacity: 1;
    }
  }

  th {
    .icon-arrow-up-3,
    .icon-arrow-down-3 {
      margin-left: 0.66em;
      vertical-align: middle;
    }

    @include rtl {
      .icon-arrow-up-3,
      .icon-arrow-down-3 {
        margin-left: 0;
        margin-right: 0.66em;
      }
    }

    a:focus,
    a:hover {
      .icon-arrow-up-3 {
        &:after {
          opacity: 0.66;
        }
      }

      .icon-arrow-down-3 {
        &:before {
          opacity: 0.66;
        }
      }
    }
  }
}

.icon-calendar {
  @include icon-after(calendar, true);
}

.k-navigation-container__nav {
  .disabled {
    .no-dropdown {
      &:after {
        display: inline-block;
        content: " ";
        width: 0;
        height: 0;
        margin-left: 6px;
        vertical-align: middle;
        border-top: 4px dashed;
        border-right: 4px solid transparent;
        border-left: 4px solid transparent;
      }
    }
  }
}


.element-invisible {
  @include visually-hidden;
}

.k-table {
  .btn-group {
    white-space: nowrap;
    font-size: 0;

    .btn {
      display: inline-block;
      float: none;
      margin-right: 0;
    }
  }
}

label {
  vertical-align: middle;

  & + small {
    display: inline-block;
    vertical-align: middle;
    margin-bottom: 5px;
  }
}









@include modernizr('.k-checked') {


  /* Block element to clear from other floating / inline-block elements */

  .k-optionlist-joomla {
    @include clearfix;
    display: block;
    max-width: 100%;
    overflow: auto;


    /* "Inline" table to make element as wide as children */

    .controls {
      position: relative;
      display: table;
      margin: 0;
      border: 1px solid $k-input-border;
      padding: 1px;
      border-radius: $k-input-border-radius;
      background: white;

      @include flexbox(0,0) {
        display: flex;
        flex-wrap: wrap;
      }


      /* Hiding the input but keeping accessible */

      input[type=radio] {
        @extend .k-visually-hidden;
      }


      /**
       * Label styling
       *
       * 1. Display as table cell so the labels line up next to each other
       * 2. Take one pixel off the radius to look smooth
       * 3. Don't let the user select
       */

      label {
        position: relative;
        z-index: 1;
        display: table-cell; /* 1 */
        margin: 0;
        padding: floor(($k-input-height-base - $k-font-size - 6px) / 2) 10px;
        line-height: 1.25em;
        text-align: center;
        color: $k-input-color;
        font-weight: normal;
        border-radius: $k-input-border-radius - 1px; /* 2 */
        cursor: pointer;
        user-select: none; /* 3 */
        word-wrap: break-word;
        overflow-wrap: break-word;
        vertical-align: top;
        transition: all 200ms ease-in-out;

        @include flexbox(0,0,true) {
          flex: 1 1 auto;
        }


        /**
         * Fake background to be able to zoom in in from the center on select
         *
         * 1. Cover the entire parent
         * 2. Low z-index so label content will stay on top
         * 3. Hide the element by default
         * 4. Same radius as parent
         * 5. Scale to 0,0
         */

        &:before {
          @include coverall; /* 1 */
          z-index: -1; /* 2 */
          display: block;
          content: " ";
          opacity: 0; /* 3 */
          border-radius: $k-input-border-radius - 1px; /* 4 */
          transform: scale(0,0); /* 5 */
          background: $k-color-neutral;
          transition: all 200ms ease-in-out;
        }


        /* A little darker background on hovering (no need for focus since this is a `<label>`) */

        &:hover {
          background: rgba(0, 0, 0, 0.15);
        }
      }


      /**
       * Styling label when checked
       *
       * 1. Transparent background for label itself
       * 2. Show psuedo element
       */

      label.is-checked {
        &, &:hover, &:focus {
          background: transparent; /* 1 */
          color: $k-color-neutral-type;
        }

        &:before {
          transform: scale(1,1); /* 2 */
          opacity: 1;; /* 2 */
        }
      }


      /**
       * Fake focus
       *
       * We need to create a separate element for the fake focus
       * The children have position: relative so we can't just fill up the entire parent div
       *
       * 1. Position it on top of the parent element but behind the labels
       * 2. Hide by default
       * 3. Display on focus
       * 4. Set border-radius same as parent
       */

      .k-optionlist__focus {
        @include coverall(-1px); /* 1 */
        z-index: 0; /* 1 */
        outline: 0;
        display: block;
        opacity: 0; /* 2 */
        visibility: hidden; /* 2 */
        border-radius: $k-input-border-radius; /* 4 */
        border: 1px solid $k-input-border-focus;
        box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba($k-input-border-focus, 0.6);
      }


      /* Display on focus and active */

      input:active ~ .k-optionlist__focus,
      input:focus ~ .k-optionlist__focus {
        opacity: 1; /* 3 */
        visibility: visible; /* 3 */
      }
    }
  }
}









.grid {
  @include clearfix;
}

.grid--2columns {
  .grid__item {
    float: left;
    width: 50%;
  }
}






#modal-holder {
  position: absolute;
  top: 0;
  left: 0;
}

.k-heading {
  margin-top: 0;
}

.no-margin-bottom {
  margin-bottom: 0;
}


// UI in 8pixel grid

.k-navigation {
  padding: 12px 0 11px;

  li {
    a {
      padding-top: 6px;
      padding-bottom: 6px;
    }
  }
}

.k-toolbar {
  padding-bottom: 7px;
  padding-right: 8px;

  .k-button {
    margin: 8px 0 0 8px;
  }
}

.k-table-container th {
  height: 40px;

  a {
    line-height: 26px;
  }
}

.k-table-container td {
  padding: 8px;
  height: 40px;
}

.k-title-bar {
  font-size: 18px;
  line-height: 16px;

  .k-title-bar__heading {
    padding: 12px;
  }
}

.k-table-pagination {
  padding-bottom: 8px;
}

.k-off-canvas-menu-toggle {
  margin: 7px 8px;
}


// Menu overrides

.k-menu-container {
  .caret {
    display: none;
  }

  .dropdown-menu {
    border-radius: 0;
    border: none;
  }

  .k-menu-container__nav li ul a {
    padding-top: 0;
    padding-bottom: 0;
  }
}